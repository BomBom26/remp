<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; }
        .form-container { margin: 20px; padding: 20px; background-color: #fff; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 90%; margin-left: auto; margin-right: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        input, select { padding: 5px; margin: 5px; }
        button { padding: 10px 20px; margin: 5px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #45a049; }
        .home-link { position: absolute; top: 10px; left: 10px; font-size: 16px; text-decoration: none; color: #007BFF; }
        .home-link:hover { text-decoration: underline; }
        .logout-link { position: absolute; top: 10px; right: 10px; font-size: 16px; text-decoration: none; color: #ff4444; }
        .logout-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <a href="/" class="home-link">üè† –ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="/logout" class="logout-link">–í–∏–π—Ç–∏</a>
    <div class="form-container">
        <h2>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
        <form method="POST">
            –ü–µ—Ä—ñ–æ–¥: 
            –ó: <input type="date" name="start_date" value="{{ start_date }}">
            –ü–æ: <input type="date" name="end_date" value="{{ end_date }}">
            –°—Ç–∞—Ç—É—Å: 
            <select name="status_filter">
                <option value="all" {% if status_filter == 'all' %}selected{% endif %}>–£—Å—ñ</option>
                <option value="–ó–∞–±—Ä–∞–ª–∏" {% if status_filter == '–ó–∞–±—Ä–∞–ª–∏' %}selected{% endif %}>–ó–∞–±—Ä–∞–ª–∏</option>
                <option value="–û—á—ñ–∫—É—î" {% if status_filter == '–û—á—ñ–∫—É—î' %}selected{% endif %}>–û—á—ñ–∫—É—î</option>
                <option value="–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è" {% if status_filter == '–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è' %}selected{% endif %}>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</option>
            </select>
            <input type="submit" value="–û–Ω–æ–≤–∏—Ç–∏">
        </form>
        <form method="POST" style="margin-top: 20px;">
            <input type="date" name="date" required> –î–∞—Ç–∞<br>
            <input type="text" name="client_name" placeholder="–Ü–º‚Äô—è –∫–ª—ñ—î–Ω—Ç–∞" required><br>
            <input type="text" name="instagram" placeholder="Instagram"><br>
            <input type="text" name="post_office" placeholder="–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –ø–æ—à—Ç–∏" required><br>
            <input type="number" name="prepayment" placeholder="–ü–µ—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ (–≥—Ä–Ω)" step="0.01" value="0"><br>
            <input type="number" name="cod" placeholder="–ù–∞ –ø–æ—à—Ç—ñ (–≥—Ä–Ω)" step="0.01" value="0"><br>
            –¢–æ–≤–∞—Ä–∏: <select name="products" multiple size="5">
                {% for product in products %}
                    <option value="{{ product[0] }} (1 —à—Ç.)">{{ product[0] }} ({{ product[1] }} —à—Ç.)</option>
                {% endfor %}
            </select><br>
            <input type="text" name="ttn" placeholder="–ù–æ–º–µ—Ä –¢–¢–ù"><br>
            <select name="status">
                <option value="–û—á—ñ–∫—É—î">–û—á—ñ–∫—É—î</option>
                <option value="–ó–∞–±—Ä–∞–ª–∏">–ó–∞–±—Ä–∞–ª–∏</option>
                <option value="–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è">–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è</option>
            </select><br>
            <input type="text" name="comment" placeholder="–ö–æ–º–µ–Ω—Ç–∞—Ä"><br>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
        </form>
        <table>
            <tr>
                <th>‚Ññ</th><th>–î–∞—Ç–∞</th><th>–Ü–º‚Äô—è</th><th>Instagram</th><th>–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è</th><th>–¢–æ–≤–∞—Ä</th><th>–ü–µ—Ä–µ–¥–æ–ø–ª–∞—Ç–∞</th><th>–ù–∞ –ø–æ—à—Ç—ñ</th><th>–¢–¢–ù</th><th>–°—Ç–∞—Ç—É—Å</th><th>–ö–æ–º–µ–Ω—Ç–∞—Ä</th><th>–î—ñ—è</th>
            </tr>
            {% for sale in sales %}
            <tr>
                <td>{{ loop.index }}</td><td>{{ sale[1] }}</td><td>{{ sale[2] }}</td><td>{{ sale[3] }}</td><td>{{ sale[4] }}</td><td>{{ sale[5] }}</td><td>{{ sale[6] }} –≥—Ä–Ω</td><td>{{ sale[7] }} –≥—Ä–Ω</td><td>{{ sale[8] }}</td><td>{{ sale[9] }}</td><td>{{ sale[10] }}</td>
                <td><a href="/change_status/{{ sale[0] }}">–ó–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å</a></td>
            </tr>
            {% endfor %}
        </table>
        <h3>–ü—ñ–¥—Å—É–º–∫–∏ –∑–∞ –ø–µ—Ä—ñ–æ–¥:</h3>
        {% for name, count in product_counts.items() %}
            <p>{{ name }}: {{ count }} —à—Ç.</p>
        {% endfor %}
        <h3>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞:</h3>
        <p>–ó–∞–±—Ä–∞–ª–∏: {{ totals['–ó–∞–±—Ä–∞–ª–∏'] }} –≥—Ä–Ω</p>
        <p>–û—á—ñ–∫—É—î: {{ totals['–û—á—ñ–∫—É—î'] }} –≥—Ä–Ω</p>
        <p>–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è: {{ totals['–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è'] }} –≥—Ä–Ω</p>
    </div>
</body>
</html>
